Build started 30/9/2025 11:02:56‚ÄØam.
     1>Project "/Users/rodrigolmiranda/repo/sigma/Sigma.sln" on node 1 (VSTest target(s)).
     1>ValidateSolutionConfiguration:
         Building solution configuration "Debug|Any CPU".
Test run for /Users/rodrigolmiranda/repo/sigma/tests/Sigma.Shared.Tests/bin/Debug/net10.0/Sigma.Shared.Tests.dll (.NETCoreApp,Version=v10.0)
Test run for /Users/rodrigolmiranda/repo/sigma/tests/Sigma.Infrastructure.Tests/bin/Debug/net10.0/Sigma.Infrastructure.Tests.dll (.NETCoreApp,Version=v10.0)
Test run for /Users/rodrigolmiranda/repo/sigma/tests/Sigma.Domain.Tests/bin/Debug/net10.0/Sigma.Domain.Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.0-preview-25451-107 (arm64)

Test run for /Users/rodrigolmiranda/repo/sigma/tests/Sigma.Application.Tests/bin/Debug/net10.0/Sigma.Application.Tests.dll (.NETCoreApp,Version=v10.0)
Test run for /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/bin/Debug/net10.0/Sigma.API.Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.0-preview-25451-107 (arm64)

VSTest version 18.0.0-preview-25451-107 (arm64)

VSTest version 18.0.0-preview-25451-107 (arm64)

VSTest version 18.0.0-preview-25451-107 (arm64)

Starting test execution, please wait...Starting test execution, please wait...

Starting test execution, please wait...
Starting test execution, please wait...
Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
A total of 1 test files matched the specified pattern.
A total of 1 test files matched the specified pattern.
A total of 1 test files matched the specified pattern.
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v2.8.2+699d445a1a (64-bit .NET 10.0.0-rc.1.25451.107)
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.3+b1b99bdeb3 (64-bit .NET 10.0.0-rc.1.25451.107)
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.3+b1b99bdeb3 (64-bit .NET 10.0.0-rc.1.25451.107)
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.3+b1b99bdeb3 (64-bit .NET 10.0.0-rc.1.25451.107)
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.3+b1b99bdeb3 (64-bit .NET 10.0.0-rc.1.25451.107)
[xUnit.net 00:00:00.09]   Discovering: Sigma.Shared.Tests
[xUnit.net 00:00:00.14]   Discovered:  Sigma.Shared.Tests
[xUnit.net 00:00:00.15]   Starting:    Sigma.Shared.Tests
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Reaction_ShouldHandleVariousEmojis(key: "üëç", count: 5) [17 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_ShouldInitializeWithDefaults [14 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppWebhookPayloadTests.WhatsAppWebhookPayload_Properties_ShouldBeSettableAndGettable [17 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageSenderInfoTests.Constructor_ShouldInitializeWithDefaults [9 ms]
  Passed Sigma.Shared.Tests.Contracts.DiscordWebhookPayloadTests.DiscordWebhookPayload_ShouldInitializeWithDefaults [9 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Media_ShouldHandleVariousTypes(mimeType: "video/mp4", fileName: "video.mp4", size: 5242880) [17 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppEntryTests.WhatsAppEntry_Properties_ShouldBeSettableAndGettable [16 ms]
  Passed Sigma.Shared.Tests.Contracts.SlackWebhookPayloadTests.SlackWebhookPayload_EventCallback_ShouldHaveCorrectProperties [9 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Fragment_ShouldHandleVariousTypes(type: Emoji, value: "üòÄ", url: null, start: 15, end: 17) [17 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Reaction_ShouldHandleVariousEmojis(key: "‚ù§Ô∏è", count: 15) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Reaction_ShouldHandleVariousEmojis(key: "üòÇ", count: 3) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Reaction_ShouldHandleVariousEmojis(key: ":custom_emoji:", count: 1) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Media_ShouldHandleVariousTypes(mimeType: "image/jpeg", fileName: "photo.jpg", size: 102400) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Media_ShouldHandleVariousTypes(mimeType: "audio/mpeg", fileName: "song.mp3", size: 3145728) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Media_ShouldHandleVariousTypes(mimeType: "application/zip", fileName: "archive.zip", size: 2097152) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageSenderInfoTests.Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageMediaTests.Constructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Fragment_ShouldHandleVariousTypes(type: Hashtag, value: "#trending", url: null, start: 20, end: 29) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Fragment_ShouldHandleVariousTypes(type: Mention, value: "@user", url: null, start: 5, end: 10) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppEntryTests.WhatsAppEntry_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Fragment_ShouldHandleVariousTypes(type: Link, value: "https://example.com", url: "https://example.com", start: 0, end: 19) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Fragment_ShouldHandleVariousTypes(type: Code, value: "`console.log()`", url: null, start: 30, end: 45) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Constructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Constructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.SlackWebhookPayloadTests.SlackWebhookPayload_Properties_ShouldBeSettableAndGettable [1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageReactionInfoTests.Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageFragmentTests.Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.SlackWebhookPayloadTests.SlackWebhookPayload_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppWebhookPayloadTests.WhatsAppWebhookPayload_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_UpdateId_ShouldHandleVariousValues(updateId: -1) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.SlackWebhookPayloadTests.SlackWebhookPayload_UrlVerification_ShouldHaveCorrectProperties [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_UpdateId_ShouldHandleVariousValues(updateId: 0) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_UpdateId_ShouldHandleVariousValues(updateId: 9876543210) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_UpdateId_ShouldHandleVariousValues(updateId: 1234567890) [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.TelegramWebhookPayloadTests.TelegramWebhookPayload_Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.DiscordWebhookPayloadTests.DiscordWebhookPayload_Properties_ShouldBeSettableAndGettable [3 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Field_ShouldHandleVariousValues(field: "contacts") [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WebhookPayloadTests.WebhookPayload_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Field_ShouldHandleVariousValues(field: "messages") [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Field_ShouldHandleVariousValues(field: "errors") [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Field_ShouldHandleVariousValues(field: "statuses") [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Reactions_ShouldHandleCollection [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.MessageEventType_ShouldHaveExpectedValues [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WebhookPayloadTests.WebhookPayload_Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.RichFragments_ShouldHandleCollection [< 1 ms]
[xUnit.net 00:00:00.27]   Finished:    Sigma.Shared.Tests
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Media_ShouldHandleCollection [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.FragmentType_ShouldHaveExpectedValues [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Sender_ShouldHandleProperties [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Value_ShouldHandleComplexObjects [4 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.WhatsAppChangeTests.WhatsAppChange_Properties_ShouldBeSettableAndGettable [< 1 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Properties_ShouldBeSettableAndGettable [6 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Raw_ShouldHandleJsonDocument [15 ms]
  Passed Sigma.Shared.Tests.Contracts.MessageEventTests.Constructor_ShouldInitializeWithDefaults [2 ms]

Test Run Successful.
Total tests: 55
     Passed: 55
 Total time: 1.5008 Seconds
[xUnit.net 00:00:01.21]   Discovering: Sigma.Infrastructure.Tests
[xUnit.net 00:00:01.50]   Discovered:  Sigma.Infrastructure.Tests
[xUnit.net 00:00:01.78]   Discovering: Sigma.Application.Tests
[xUnit.net 00:00:02.20]   Starting:    Sigma.Infrastructure.Tests
[xUnit.net 00:00:02.30]     Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveEntitiesAsync_WithFailure_ShouldReturnFalse [SKIP]
[xUnit.net 00:00:02.30]       In-memory database doesn't enforce unique constraints
  Skipped Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveEntitiesAsync_WithFailure_ShouldReturnFalse [1 ms]
[xUnit.net 00:00:02.33]   Discovered:  Sigma.Application.Tests
  Passed Sigma.Infrastructure.Tests.UnitTest1.Test1 [28 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.PlatformSettings_PropertiesAreIndependent [65 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.PlatformSettings_CanSetAndGetAllProperties [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.WhatsAppSettings_DefaultConstructor_InitializesWithNullValues [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.PlatformSettings_CanBeNested [15 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.AllSettings_CanHandleNullAndEmptyStrings [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.TelegramSettings_CanAddAndRetrieveBotTokens [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.SlackSettings_DefaultConstructor_InitializesWithNullValues [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.SlackSettings_CanSetAndGetAllProperties [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.TelegramSettings_BotTokens_CanBeReplaced [5 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.TelegramSettings_CanClearBotTokens [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.DiscordSettings_CanSetAndGetAllProperties [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.WhatsAppSettings_CanSetAndGetAllProperties [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_WithAllParameters_CreatesCorrectContext [91 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.TelegramSettings_DefaultConstructor_InitializesEmptyDictionary [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.TelegramSettings_CanSetNewDictionary [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.DiscordSettings_DefaultConstructor_InitializesWithNullValues [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Configuration.PlatformSettingsTests.PlatformSettings_DefaultConstructor_InitializesAllProperties [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithDifferentCase_ReturnsTrueCaseInsensitive [3 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Anonymous_CreatesAnonymousContext [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithNullRole_ReturnsFalse [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_WithNullRoles_CreatesEmptyRolesList [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "ADMIN", existingRole: "admin", expected: True) [3 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: null, existingRole: "admin", expected: False) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "Admin", existingRole: "admin", expected: True) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "", existingRole: "admin", expected: False) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "admin", existingRole: "admin", expected: True) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "admin", existingRole: "ADMIN", expected: True) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "admin", existingRole: "Admin", expected: True) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_VariousCases_ReturnsExpectedResult(roleToCheck: "user", existingRole: "admin", expected: False) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.System_CreatesSystemContext [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_Default_CreatesAnonymousContext [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithNoRoles_ReturnsFalse [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_WithEmptyGuid_AllowsEmptyTenantId [< 1 ms]
[xUnit.net 00:00:02.41]   Discovering: Sigma.API.Tests
[xUnit.net 00:00:02.71]   Starting:    Sigma.Application.Tests
[xUnit.net 00:00:02.71]   Discovering: Sigma.Domain.Tests
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Constructor_ShouldSetProperties [18 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidatorInterfaceTests.IValidator_WithInvalidData_ShouldReturnErrors [18 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_CommandWithoutResult_WithRegisteredHandler_ShouldExecuteHandler [37 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Constructor_ShouldHandleVariousInputs(propertyName: null, message: "Null message") [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Constructor_ShouldHandleVariousInputs(propertyName: "", message: "Message cannot be empty") [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Constructor_ShouldHandleVariousInputs(propertyName: "Very.Long.Property.Path.With.Multiple.Segments", message: "Complex path error") [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Constructor_ShouldHandleVariousInputs(propertyName: "   ", message: "Message with spaces") [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.MultipleErrors_ShouldBeDistinct [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.Properties_ShouldBeReadOnly [12 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationErrorTests.ErrorMessages_ShouldSupportVariousFormats [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidatorInterfaceTests.IValidator_WithCancellation_ShouldRespectToken [17 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidatorInterfaceTests.IValidator_ShouldBeImplementable [< 1 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_WithoutRegisteredHandler_ShouldThrowException [18 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_WithRegisteredHandler_ShouldExecuteHandler [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.FailureWithPropertyAndMessage_ShouldReturnInvalidResult [3 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.Errors_ShouldBeReadOnly [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.DefaultConstructor_ShouldCreateValidResult [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.MultipleFailureScenarios_ShouldHandleCorrectly [1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.Success_ShouldReturnValidResult [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.ConstructorWithErrors_ShouldCreateInvalidResult [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.ConstructorWithEmptyErrors_ShouldCreateInvalidResult [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.FailureWithSingleError_ShouldReturnInvalidResult [< 1 ms]
  Passed Sigma.Application.Tests.Common.Pipeline.ValidationResultTests.FailureWithErrors_ShouldReturnInvalidResult [< 1 ms]
  Passed Sigma.Application.Tests.Queries.GetTenantByIdQueryHandlerTests.HandleAsync_WithCancellationToken_ShouldPassTokenToRepository [94 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_WithBehavior_ShouldExecuteBehaviorPipeline [33 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithMultipleBehaviors_ShouldExecuteInOrder [93 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithRegisteredHandler_ShouldExecuteHandler [< 1 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithoutRegisteredHandler_ShouldThrowException [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidSlugFormat_ShouldNotHaveError(slug: "test-tenant") [99 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidSlugFormat_ShouldNotHaveError(slug: "123-test") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidSlugFormat_ShouldNotHaveError(slug: "test-tenant-123") [< 1 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithCancellationToken_ShouldPassToHandler [2 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_WithCancellationToken_ShouldPassToHandler [5 ms]
  Passed Sigma.Application.Tests.Queries.GetTenantByIdQueryHandlerTests.HandleAsync_WithExistingTenant_ShouldReturnTenant [6 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithBehaviorReturningError_ShouldShortCircuit [1 ms]
  Passed Sigma.Application.Tests.Commands.CreateTenantCommandHandlerTests.HandleAsync_WithValidCommand_ShouldCreateTenant [103 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Query_WithException_ShouldLogError [107 ms]
  Passed Sigma.Application.Tests.Queries.GetTenantByIdQueryHandlerTests.HandleAsync_WithNonExistentTenant_ShouldReturnNotFoundError [6 ms]
  Passed Sigma.Application.Tests.Commands.CreateTenantCommandHandlerTests.HandleAsync_WithNullPlanType_ShouldUseDefault [6 ms]
  Passed Sigma.Application.Tests.Commands.CreateWorkspaceCommandHandlerTests.HandleAsync_WithoutExternalId_ShouldCreateWorkspaceWithoutExternalId [39 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithAuthHandlerThrowingException_ShouldReturnUnauthorized [49 ms]
  Passed Sigma.Application.Tests.Commands.CreateTenantCommandHandlerTests.HandleAsync_WithExistingSlug_ShouldReturnConflictError [2 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_CommandWithoutResult_WithSuccessfulExecution_ShouldLogInformation [4 ms]
  Passed Sigma.Application.Tests.Commands.CreateTenantCommandHandlerTests.HandleAsync_WithInvalidRetentionDays_ShouldUseDefault [1 ms]
  Passed Sigma.Application.Tests.Services.CommandDispatcherTests.DispatchAsync_WithMultipleBehaviors_ShouldExecuteInOrder [14 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Query_WithFailedExecution_ShouldLogWarning [1 ms]
  Passed Sigma.Application.Tests.Services.QueryDispatcherTests.DispatchAsync_WithBehavior_ShouldExecuteBehaviorPipeline [12 ms]
  Passed Sigma.Application.Tests.Commands.CreateWorkspaceCommandHandlerTests.HandleAsync_WithExternalId_ShouldSetExternalId [2 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_CommandWithoutResult_WithException_ShouldLogErrorAndRethrow [1 ms]
  Passed Sigma.Application.Tests.Commands.CreateWorkspaceCommandHandlerTests.HandleAsync_WithNonExistentTenant_ShouldReturnNotFoundError [1 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Command_WithSuccessfulExecution_ShouldLogInformation [3 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Query_WithValidatorPassingValidation_ShouldCallNext [121 ms]
  Passed Sigma.Application.Tests.Commands.CreateWorkspaceCommandHandlerTests.HandleAsync_WithValidCommand_ShouldCreateWorkspace [3 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Query_WithUnauthorizedUser_ShouldReturnForbidden [8 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Command_WithFailedExecution_ShouldLogWarning [2 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_CommandWithoutResult_WithFailure_ShouldLogWarning [1 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Command_WithValidatorPassingValidation_ShouldCallNext [9 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Query_WithValidatorFailingValidation_ShouldReturnValidationError [2 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Command_WithValidatorFailingValidation_ShouldReturnValidationError [2 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithEmptyName_ShouldHaveError [36 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidPlanType_ShouldNotHaveError(planType: "free") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidPlanType_ShouldNotHaveError(planType: null) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidPlanType_ShouldNotHaveError(planType: "professional") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidPlanType_ShouldNotHaveError(planType: "starter") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidPlanType_ShouldNotHaveError(planType: "enterprise") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidRetentionDays_ShouldNotHaveError(retentionDays: 3650) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidRetentionDays_ShouldNotHaveError(retentionDays: 30) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidRetentionDays_ShouldNotHaveError(retentionDays: 365) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidRetentionDays_ShouldNotHaveError(retentionDays: 1) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidRetentionDays_ShouldHaveError(retentionDays: 3651) [1 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_CommandWithoutResult_WithValidatorFailingValidation_ShouldReturnValidationError [4 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidRetentionDays_ShouldHaveError(retentionDays: 0) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidRetentionDays_ShouldHaveError(retentionDays: -1) [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithEmptySlug_ShouldHaveError [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Command_WithNoValidator_ShouldCallNext [1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithNameExceeding100Characters_ShouldHaveError [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_Query_WithNoValidator_ShouldCallNext [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidSlugFormat_ShouldHaveError(slug: "Test Tenant") [1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidSlugFormat_ShouldHaveError(slug: "TEST-TENANT") [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.ValidationBehaviorTests.HandleAsync_CommandWithoutResult_WithNoValidator_ShouldCallNext [1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidSlugFormat_ShouldHaveError(slug: "test_tenant") [< 1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidSlugFormat_ShouldHaveError(slug: "test.tenant") [2 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithInvalidPlanType_ShouldHaveError [1 ms]
  Passed Sigma.Application.Tests.Validators.CreateTenantCommandValidatorTests.Validate_WithValidCommand_ShouldNotHaveErrors [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithAuthorizedUser_ShouldCallNext [45 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Query_WithNoAuthorizationHandler_ShouldCallNext [1 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Query_WithCancellationToken_ShouldPassTokenToNext [47 ms]
[xUnit.net 00:00:03.17]   Discovered:  Sigma.API.Tests
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithCancellationToken_ShouldPassTokenToNext [4 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Command_WithCancellationToken_ShouldPassTokenToNext [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Command_WithException_ShouldLogError [3 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_Query_WithSuccessfulExecution_ShouldLogInformation [2 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Query_WithAuthorizedUser_ShouldCallNext [18 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_CommandWithoutResult_WithAuthorizedUser_ShouldCallNext [4 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_CommandWithoutResult_WithNoHttpContext_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_CommandWithoutResult_WithUnauthorizedUser_ShouldReturnForbidden [32 ms]
[xUnit.net 00:00:03.31]   Discovered:  Sigma.Domain.Tests
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_WithNullUserId_AllowsNullUserId [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithNonExistingRole_ReturnsFalse [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Constructor_WithNullSlug_SetsEmptyString [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithEmptyRole_ReturnsFalse [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Multiple_FactoryMethods_CreateDifferentInstances [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithWhitespaceRole_ReturnsFalse [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.Roles_IsReadOnlyList [1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.System_HasSystemAndAdminRoles [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Services.TenantContextTests.HasRole_WithExistingRole_ReturnsTrue [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.TenantRepository_UpdateAsync_WithValidTenant_ShouldUpdateSuccessfully [1 s]
[xUnit.net 00:00:03.97]     Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.AddAsync_WithCancellationToken_ShouldRespectCancellation [SKIP]
[xUnit.net 00:00:03.97]       AddAsync doesn't immediately check cancellation token
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.UpdateAsync_ShouldUpdateChannel [1 s]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByExternalIdAsync_WithNullExternalId_ShouldReturnNull [1 s]
  Skipped Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.AddAsync_WithCancellationToken_ShouldRespectCancellation [1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.WorkspaceRepository_UpdateAsync_WithMultipleUpdates_ShouldPersistAll [316 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.SaveChangesAsync_WithDeletedEntity_ShouldRemoveFromDatabase [2 s]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetBySlugAsync_WithExistingTenant_ShouldReturnTenant [2 s]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.CanConnectAsync_WithValidDatabase_ShouldReturnTrue [1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.ExistsAsync_WithNonExistentChannel_ShouldReturnFalse [451 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByTenantIdAsync_WithDifferentTenant_ShouldNotReturnOtherTenantWorkspaces [472 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.MessageRepository_UpdateAsync_WithDeletedMessage_ShouldPersistDeletion [178 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetByChannelIdAsync_WithPagination_ShouldReturnPaginatedResults [2 s]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.DateTimeConversions_StoreAsUtc [2 s]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.SaveChangesAsync_WithModifiedEntity_ShouldSetUpdatedTimestamp [105 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.ChannelRepository_UpdateAsync_WithDetachedEntity_ShouldAttachAndUpdate [77 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.Constructor_WithOnlyOptions_ShouldInitializeWithNullTenantContext [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.SaveChangesAsync_WithMixedOperations_ShouldHandleCorrectly [27 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.CanConnectAsync_WhenExceptionOccurs_ShouldReturnFalse [2 ms]
[xUnit.net 00:00:04.47]   Starting:    Sigma.API.Tests
[xUnit.net 00:00:04.45]   Starting:    Sigma.Domain.Tests
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTimestampTests.SaveChangesAsync_WithUnchangedEntity_ShouldNotUpdateTimestamps [5 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.WorkspaceRepository_UpdateAsync_WithNullWorkspace_ShouldThrowArgumentNullException [87 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.TenantRepository_UpdateAsync_WithDeactivatedTenant_ShouldPersistDeactivation [2 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.ChannelRepository_UpdateAsync_WithValidChannel_ShouldUpdateSuccessfully [8 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.WorkspaceRepository_UpdateAsync_WithValidWorkspace_ShouldUpdateSuccessfully [2 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.TenantRepository_UpdateAsync_WithNullTenant_ShouldThrowArgumentNullException [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.MessageRepository_Constructor_WithNullContext_ShouldThrowArgumentNullException [23 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetAllActiveAsync_WithMultipleTenants_ShouldReturnAll [283 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_QueryWithLongExecution_ShouldLogCorrectElapsedTime [108 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithUnauthenticatedUser_ShouldReturnUnauthorized [68 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Query_WithNoUser_ShouldReturnUnauthorized [1 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithUnauthorizedUser_ShouldReturnForbidden [8 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithNoUser_ShouldReturnUnauthorized [2 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Query_WithCancellationToken_ShouldPassTokenToNext [1 ms]
  Passed Sigma.Application.Tests.Behaviors.AuthorizationBehaviorTests.HandleAsync_Command_WithNoAuthorizationHandler_ShouldCallNext [1 ms]
  Passed Sigma.Application.Tests.Behaviors.LoggingBehaviorTests.HandleAsync_CommandWithLongExecution_ShouldLogCorrectElapsedTime [160 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateWorkspacePayload_ShouldInitializeProperties [70 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateWorkspaceInput_ShouldInitializeProperties [86 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateTenantInput_ShouldInitializeProperties [19 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.Payload_WithErrors_ShouldNotBeSuccess [7 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.UpdateTenantPlanPayload_ShouldInitializeProperties [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.UserError_ShouldInitializeProperties [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateChannelPayload_ShouldInitializeProperties [1 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateChannelInput_ShouldInitializeProperties [2 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.Payload_ShouldInitializeProperties [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.CreateTenantPayload_ShouldInitializeProperties [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.UpdatedAtUtc_ShouldBeInitiallyEqualToCreatedAtUtc [41 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Entity_ShouldTrackCreationAndUpdateTimes [40 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithEmptyStrings_ShouldCreateSuccessfully [42 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithNegativeDays_ThrowsArgumentException [43 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.ThrowWhenCreatedWithNullSender [43 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.GetHashCode_WithSameValues_ShouldReturnSameHashCode [47 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithEmptyPlatformUserId_CreatesInstance [43 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.AllValueObjects_ShouldHavePrivateConstructors [47 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithEmptyKey_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Activate_CanBeCalledMultipleTimes [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "Teams") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithInvalidRetentionDays_ShouldThrowArgumentException(retentionDays: -100) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "Telegram") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithInvalidRetentionDays_ShouldThrowArgumentException(retentionDays: 0) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "Discord") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithInvalidRetentionDays_ShouldThrowArgumentException(retentionDays: -1) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "Custom") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "Slack") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithVariousPlatforms_ShouldSetCorrectly(platform: "WhatsApp") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithWhitespacePlanType_ShouldThrowArgumentException(planType: "", retentionDays: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.DomainEvents_ShouldReturnReadOnlyCollection [1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithWhitespacePlanType_ShouldThrowArgumentException(planType: "\n", retentionDays: 30) [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.MessageRepository_UpdateAsync_WithValidMessage_ShouldUpdateSuccessfully [3 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.AllRepositories_UpdateAsync_WithConcurrentUpdates_ShouldHandleCorrectly [11 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.ChannelRepository_UpdateAsync_WithNullChannel_ShouldThrowArgumentNullException [8 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.RepositoryUpdateMethodTests.MessageRepository_UpdateAsync_WithNullMessage_ShouldThrowArgumentNullException [4 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByIdAsync_WithExistingWorkspace_ShouldReturnWorkspace [285 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetAllActiveAsync_WithNoTenants_ShouldReturnEmptyList [186 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.NoTenantFilter_WhenTenantContextIsEmpty [410 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "wow", count: 1000) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithWhitespacePlanType_ShouldThrowArgumentException(planType: " ", retentionDays: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithWhitespacePlanType_ShouldThrowArgumentException(planType: "   ", retentionDays: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_WithWhitespacePlanType_ShouldThrowArgumentException(planType: "\t", retentionDays: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "angry", count: 100000) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "like", count: 1) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Unknown_CreatesUnknownUser [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "love", count: 10) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "sad", count: 10000) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousValidInputs_ShouldCreateValidInstances(key: "haha", count: 100) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithVariousValidDays_SetsCorrectly(days: 365) [2 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Entity_ShouldHaveUniqueId [2 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.GetHashCode_WithNegativeCountConvertedToZero_ShouldBeSame [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithVariousValidDays_SetsCorrectly(days: 2147483647) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithVariousValidDays_SetsCorrectly(days: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithVariousValidDays_SetsCorrectly(days: 1) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithValidParameters_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithVariousValidDays_SetsCorrectly(days: 7) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithEmptyStrings_CreatesInstance [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.GetHashCode_WithDifferentValues_ShouldReturnDifferentHashCodes [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.MarkAsDeletedSuccessfully [3 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_WithSameValues_ShouldReturnTrue [1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_WithDifferentType_ShouldReturnFalse [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithNegativeCount_ShouldSetCountToZero [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_WithNull_ShouldReturnFalse [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.Tenant_PrivateConstructor_ShouldInitializeWithDefaults [9 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.IsBot_Property_ReflectsConstructorParameter(platformUserId: "user789", displayName: "Regular User", expectedIsBot: False) [6 ms]
  Passed Sigma.API.Tests.GraphQL.Types.GraphQLTypesTests.UpdateTenantPlanInput_ShouldInitializeProperties [2 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateTenant_WithRepositoryGetByIdFailure_ShouldStillReturnSuccess [277 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenant_WithFailedQuery_ShouldReturnNull [286 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithUnicodeContent_ShouldHandleCorrectly [294 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithVariousPlans_ShouldUpdateCorrectly(planType: "enterprise", retentionDays: 365) [31 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithVariousPlans_ShouldUpdateCorrectly(planType: "free", retentionDays: 30) [13 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithVariousPlans_ShouldUpdateCorrectly(planType: "professional", retentionDays: 90) [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithComplexPayload_ShouldLogCorrectly [37 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithDifferentCaseHexOnly_ShouldReturnTrue [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithSpecialCharactersInSecret_ShouldWork [3 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithNullParameters_ShouldNotThrow(platform: "platform", tenantId: null, payload: "payload") [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithNullParameters_ShouldNotThrow(platform: "platform", tenantId: "tenant", payload: null) [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithNullParameters_ShouldNotThrow(platform: null, tenantId: "tenant", payload: "payload") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_MultipleTimes_ShouldReturnSameContent [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithWhitespaceContent_ShouldReturnAsIs(content: "\n") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithInvalidTimestampFormat_ShouldNotRejectRequest [346 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithWhitespaceContent_ShouldReturnAsIs(content: " ") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithWhitespaceContent_ShouldReturnAsIs(content: "\r\n") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithWhitespaceContent_ShouldReturnAsIs(content: "\t") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithWhitespaceContent_ShouldReturnAsIs(content: "") [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateTenant_WithCancellation_ShouldPropagateCancellation [17 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithValidSignature_ShouldProcessWebhook [348 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithUnitOfWorkFailure_ShouldReturnError [3 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithLargeBody_ShouldHandleCorrectly [4 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithVariousLimits_ShouldRespectLimit(limit: 10) [64 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithInvalidPayload_ShouldReturnBadRequest [4 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithStatusUpdate_ShouldProcessWebhook [353 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithInvalidSignature_ShouldReturnFalse [4 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithVariousLimits_ShouldRespectLimit(limit: 100) [14 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "channel_created") [24 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithVariousLimits_ShouldRespectLimit(limit: 0) [1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "member_joined_channel") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "channel_unarchive") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "channel_deleted") [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "member_left_channel") [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.IsBot_Property_ReflectsConstructorParameter(platformUserId: "bot456", displayName: "Bot Name", expectedIsBot: True) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.IsBot_Property_ReflectsConstructorParameter(platformUserId: "user123", displayName: "John Doe", expectedIsBot: True) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.Channel_PrivateConstructor_ShouldInitializeWithDefaults [1 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.MessageSender_PrivateConstructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.Workspace_PrivateConstructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Deactivate_WhenAlreadyInactive_ShouldRemainInactive [11 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.GetHashCode_WithSameValues_ReturnsSameHashCode [3 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Activate_ShouldSetIsActiveTrue [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousPlanTypes_ShouldSetCorrectly(planType: "enterprise") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousPlanTypes_ShouldSetCorrectly(planType: "free") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousPlanTypes_ShouldSetCorrectly(planType: "professional") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousPlanTypes_ShouldSetCorrectly(planType: "starter") [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Activate_ShouldUpdateTimestamp [11 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlanSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Deactivate_SetsIsActiveToFalseAndUpdatesTimestamp [12 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithEmptyWorkspaceId_CreatesInstance [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 2147483647) [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.DomainEvents_ShouldMaintainOrderOfAddition [24 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.ActivateDeactivate_CanToggleStatus [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 90) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 730) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 1) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 30) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 365) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 180) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithVariousRetentionDays_ShouldSetCorrectly(retentionDays: 7) [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ActivateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UseDefaultRetentionWhenInvalid [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ExternalId_ShouldBeNullByDefault [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalId_WithLongString_ShouldSetCorrectly [11 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithDbUpdateException_ShouldHandleGracefully [1 s]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_Command_WithAsyncOperation_ShouldHandleCorrectly [72 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithExistingTransaction_ShouldNotCreateNewTransaction [99 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithCancellationDuringTransaction_ShouldRollback [72 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_MultipleCommands_ShouldHandleIndependently [1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_CommandWithResponse_WithAsyncOperation_ShouldHandleCorrectly [29 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithMultipleErrors_ShouldRollbackAll [1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_Command_WithSuccess_ShouldComplete [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_CommandWithResponse_WithSuccess_ShouldComplete [< 1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetByIdAsync_WithNonExistentMessage_ShouldReturnNull [481 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.ExistsAsync_WithNonExistentWorkspace_ShouldReturnFalse [266 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.GetByIdAsync_WithExistingChannel_ShouldReturnChannel [582 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.UpdateAsync_WithExistingTenant_ShouldUpdateInContext [175 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetBySlugAsync_WithNonExistentSlug_ShouldReturnNull [57 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.ExistsAsync_WithWrongTenantId_ShouldReturnFalse [151 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithLongStrings_ShouldCreateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithEmptyStrings_ShouldCreateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithZeroRetentionDays_ShouldDefaultTo30 [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithNullKey_ShouldThrowArgumentNullException [22 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ThrowWhenCreatedWithNullName [1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_ComparingNegativeCountConvertedToZero_ShouldBeEqual [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_ShouldUpdateProperties [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithLongKey_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousNegativeCounts_ShouldSetCountToZero(key: "key", inputCount: -1, expectedCount: 0) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousNegativeCounts_ShouldSetCountToZero(key: "key", inputCount: -2147483648, expectedCount: 0) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithVariousNegativeCounts_ShouldSetCountToZero(key: "key", inputCount: -100, expectedCount: 0) [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_WithDifferentKey_ShouldReturnFalse [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithSpecialCharactersInKey_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithZeroCount_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Properties_ShouldBeReadOnly [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Constructor_WithMaxIntCount_ShouldCreateInstance [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.AddMultipleWorkspaces_ShouldAddAll [2 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageReactionTests.Equals_WithDifferentCount_ShouldReturnFalse [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Constructor_WithNegativeRetentionDays_ShouldDefaultTo30 [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Entity_ShouldHaveUniqueId [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ThrowWhenUpdatingWithInvalidRetentionDays [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ThrowWhenUpdatingWithEmptyPlanType [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.ThrowWhenCreatedWithNullSlug [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.DeactivateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Deactivate_ShouldSetIsActiveFalse [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UpdatePlan_MultipleTimes_ShouldUpdateCorrectly [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Entity_ShouldTrackCreationAndUpdateTimes [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.AddWorkspaceSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalId_ShouldUpdateTimestamp [11 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.AddChannel_WithEmptyStrings_ShouldCreateChannel [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.BeCreatedWithValidData [33 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.Message_PrivateConstructor_ShouldInitializeWithDefaults [28 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.AcceptNullText [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.AddDomainEvent_Multiple_ShouldAddAllEvents [14 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Activate_SetsIsActiveToTrueAndUpdatesTimestamp [13 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.MultipleEntities_ShouldHaveUniqueIds [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Deactivate_CanBeCalledMultipleTimes [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Equals_WithDifferentDisplayName_ReturnsFalse [26 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.Entity_Properties_ShouldHaveCorrectAccessModifiers [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithNullName_ThrowsArgumentNullException [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithNullPlatformUserId_ThrowsArgumentNullException [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateLastSync_ShouldUpdateTimestamp [11 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.AddChannel_WithNullName_ShouldThrowArgumentNullException [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateLastSyncSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalIdSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithEmptyTenantId_ShouldCreateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.BeCreatedWithValidData [1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.AddChannel_WithNullExternalId_ShouldThrowArgumentNullException [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.AddChannelSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.AddDomainEvent_ShouldAddEventToList [15 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.RemoveDomainEvent_NonExistentEvent_ShouldNotThrow [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Messages_ReturnsReadOnlyList [17 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.AllPrivateConstructors_ShouldBeAccessibleForEFCore [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.EntityPrivateConstructorTests.MessageReaction_PrivateConstructor_ShouldInitializeWithDefaults [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.CreatedAtUtc_ShouldBeSetToUtcNow [2 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.ThrowWhenCreatedWithNullPlatformMessageId [2 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.DomainEvents_InitiallyEmpty_ShouldReturnEmptyCollection [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.ClearDomainEvents_ShouldRemoveAllEvents [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.RemoveDomainEvent_ShouldRemoveSpecificEvent [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.AddMultipleReactions [5 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.UpdateExistingReaction [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.AddReactionSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Deactivate_ShouldUpdateTimestamp [11 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Channels_ShouldReturnReadOnlyCollection [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalId_WithNull_ShouldSetToNull [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.ThrowWhenCreatedWithNullPlatform [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalId_WithEmptyString_ShouldSetToEmpty [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateExternalId_MultipleTimes_ShouldUpdateCorrectly [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.ThrowWhenCreatedWithNullName [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.MessageShould.MarkAsEditedSuccessfully [2 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.UpdateLastMessageTime_SetsLastMessageTimeAndUpdatedAt [12 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.BeCreatedWithValidData [34 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.Constructor_WithoutId_ShouldGenerateNewId [9 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Activate_WhenAlreadyActive_ShouldRemainActive [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.Entity_ShouldBeAbstract [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.Workspaces_ShouldReturnReadOnlyCollection [< 1 ms]
  Passed Sigma.Domain.Tests.Common.EntityTests.Constructor_WithId_ShouldUseProvidedId [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.TenantShould.UseDefaultsWhenCreatedWithNullPlanType [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithValidParameters_CreatesInstance [2 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.GetHashCode_WithDifferentValues_UsuallyReturnsDifferentHashCode [3 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Equals_WithNullDisplayNames_HandlesProperly [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithLongStrings_CreatesInstance [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.ValueObject_Immutability_PropertiesCannotBeChanged [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithValidParameters_CreatesInstance [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithNull_ClearsRetention [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Entity_HasUniqueId [1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithZeroDays_ThrowsArgumentException [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Constructor_WithNullExternalId_ThrowsArgumentNullException [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.UpdateLastMessageTime_CanBeCalledMultipleTimes [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.Entity_TracksCreationAndUpdateTimes [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Deactivate_WhenAlreadyInactive_ShouldRemainInactive [10 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.AddMultipleChannels [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Constructor_WithLongStrings_ShouldCreateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Equals_WithSameValues_ReturnsTrue [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.ChannelTests.SetRetentionOverride_WithValidDays_SetsRetention [11 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithNullDisplayName_AllowsNullDisplayName [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.GetEqualityComponents_ContainsAllProperties [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Equals_WithDifferentIsBot_ReturnsFalse [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Equals_WithDifferentPlatformUserId_ReturnsFalse [< 1 ms]
[xUnit.net 00:00:04.77]   Finished:    Sigma.Domain.Tests
[xUnit.net 00:00:05.07]   Finished:    Sigma.Application.Tests
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVariousEventTypes_ShouldProcessAll(eventType: "channel_archive") [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithVariousLimits_ShouldRespectLimit(limit: 1) [2 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithVariousLimits_ShouldRespectLimit(limit: 1000) [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_WithEmptyPayload_ShouldWork [15 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithEmptyBody_ShouldReturnEmptyString [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithNullPayload_ShouldReturnBadRequest [18 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithExpiredTimestamp_ShouldReturnBadRequest [5 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.Constructor_WithNullServiceProvider_ShouldThrowArgumentNullException [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithDefaultBotToken_ShouldProcessWebhook [1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithInvalidVerificationToken_ShouldReturnUnauthorized [23 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithValidPayload_ShouldProcessWebhook [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.ReadRequestBodyAsync_WithSimpleBody_ShouldReturnCorrectContent [2 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithBlockActions_ShouldProcessCorrectly [2 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithUrlVerificationChallenge_ShouldReturnChallengeResponse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithNullLogger_ShouldNotThrow [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithNullSignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithEmptySignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithVerificationRequest_ShouldReturnChallenge [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithoutSha256Prefix_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithEmptySignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithoutV0Prefix_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithDefaultSigningSecret_ShouldUseDefault [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithValidSignature_ShouldReturnTrue [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithInvalidSignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_WithSpecialCharactersInSecret_ShouldWork [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithInvalidSignature_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithEmptyConfiguration_ShouldReturnUnauthorized [386 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithMissingAppSecret_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetVersion_ShouldReturnVersionString [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.LogWebhookAsync_WithValidData_ShouldLogInformation [1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithNullPayload_ShouldReturnBadRequest [1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_WithInvalidSignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMessageEditedEvent_ShouldProcessCorrectly [2 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithUppercasePrefix_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithDifferentCaseHexOnly_ShouldReturnTrue [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithMissingSignature_ShouldReturnBadRequest [3 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifySlackSignature_WithUppercasePrefix_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_CaseInsensitive_ShouldReturnTrue [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithSpecialCharactersInSecret_ShouldWork [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithNullSignature_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_WithWrongSecret_ShouldReturnFalse [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspace_WithNonExistingId_ShouldReturnNull [6 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyHmacSignature_WithValidSignature_ShouldReturnTrue [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WebhookHandlerBaseTests.VerifyWhatsAppSignature_WithValidSignature_ShouldReturnTrue [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithValidInput_ShouldReturnSuccessPayload [43 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMissingSignature_ShouldReturnUnauthorized [3 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithEmptyTenantId_ShouldUseDefaultSecret [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithFutureTimestampJustUnder5Minutes_ShouldAcceptRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMalformedJson_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithNullTenantId_ShouldUseDefaultSecret [10 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithValidEventCallback_ShouldProcessSuccessfully [1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WhenExceptionOccurs_ShouldReturn500 [5 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithEmptyBody_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithNoConfiguredSecret_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateTenant_WithValidInput_ShouldReturnSuccessPayload [22 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WhenExceptionOccurs_ShouldReturn500 [28 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WhenExceptionOccurs_ShouldReturn500 [25 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateTenant_WithDefaultValues_ShouldUseDefaults [2 ms]
  Passed Sigma.API.Tests.Webhooks.DiscordWebhookHandlerTests.HandleAsync_WithMissingBotToken_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMissingSignature_ShouldReturnBadRequest [5 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithValidSignature_ShouldProcessWebhook [1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithDefaultAppSecret_ShouldProcessWebhook [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.WhatsAppWebhookHandlerTests.HandleAsync_WithInvalidPayload_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithReactionAddedEvent_ShouldProcessCorrectly [4 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithSpecialCharactersInBody_ShouldHandleCorrectly [3 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithInvalidBotToken_ShouldReturnUnauthorized [13 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithInvalidPayload_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithInvalidSecretToken_ShouldReturnUnauthorized [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithNullPayload_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithEditedMessage_ShouldProcessWebhook [1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithPartialBotToken_ShouldProcessWebhook [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithCallbackQuery_ShouldProcessWebhook [5 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateChannel_WithValidInput_ShouldReturnSuccessPayload [40 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithValidSecretToken_ShouldProcessWebhook [1 ms]
  Passed Sigma.API.Tests.Webhooks.TelegramWebhookHandlerTests.HandleAsync_WithValidBotToken_ShouldProcessWebhook [1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithRepositoryGetByIdFailure_ShouldStillReturnSuccess [3 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithVariousPlatforms_ShouldHandleCorrectly(platform: "Telegram") [1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithVariousPlatforms_ShouldHandleCorrectly(platform: "Discord") [1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithVariousPlatforms_ShouldHandleCorrectly(platform: "Slack") [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithVariousPlatforms_ShouldHandleCorrectly(platform: "WhatsApp") [3 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateChannel_WithWorkspaceNotFound_ShouldReturnError [2 ms]
[xUnit.net 00:00:05.09]     Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithException_ShouldReturn500AndLogError [FAIL]
[xUnit.net 00:00:05.09]       Moq.MockException : 
[xUnit.net 00:00:05.09]       Expected invocation on the mock once, but was 0 times: x => x.Log<It.IsAnyType>(LogLevel.Error, It.IsAny<EventId>(), It.Is<It.IsAnyType>((v, t) => v.ToString().Contains("Error processing Slack webhook")), It.IsAny<Exception>(), It.IsAny<Func<It.IsAnyType, Exception, string>>())
[xUnit.net 00:00:05.09]       
[xUnit.net 00:00:05.09]       Performed invocations:
[xUnit.net 00:00:05.09]       
[xUnit.net 00:00:05.09]          Mock<ILogger<SlackWebhookHandler>:24> (x):
[xUnit.net 00:00:05.09]          No invocations performed.
[xUnit.net 00:00:05.09]       
[xUnit.net 00:00:05.09]       Stack Trace:
[xUnit.net 00:00:05.09]         /_/src/Moq/Mock.cs(332,0): at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage)
[xUnit.net 00:00:05.09]         /_/src/Moq/Mock`1.cs(727,0): at Moq.Mock`1.Verify(Expression`1 expression, Times times)
[xUnit.net 00:00:05.09]         /_/src/Moq/Mock`1.cs(741,0): at Moq.Mock`1.Verify(Expression`1 expression, Func`1 times)
[xUnit.net 00:00:05.09]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs(268,0): at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithException_ShouldReturn500AndLogError()
[xUnit.net 00:00:05.09]         --- End of stack trace from previous location ---
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithNonExistingTenant_ShouldReturnError [3 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateChannel_WithUnitOfWorkFailure_ShouldThrowException [2 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithNullExternalId_ShouldSucceed [3 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.UpdateTenantPlan_WithExistingTenant_ShouldUpdateSuccessfully [3 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateWorkspace_WithFailedCommand_ShouldReturnErrorPayload [6 ms]
  Passed Sigma.API.Tests.GraphQL.MutationTests.CreateTenant_WithFailedCommand_ShouldReturnErrorPayload [6 ms]
  Failed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithException_ShouldReturn500AndLogError [62 ms]
  Error Message:
   Moq.MockException : 
Expected invocation on the mock once, but was 0 times: x => x.Log<It.IsAnyType>(LogLevel.Error, It.IsAny<EventId>(), It.Is<It.IsAnyType>((v, t) => v.ToString().Contains("Error processing Slack webhook")), It.IsAny<Exception>(), It.IsAny<Func<It.IsAnyType, Exception, string>>())

Performed invocations:

   Mock<ILogger<SlackWebhookHandler>:24> (x):
   No invocations performed.

  Stack Trace:
     at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage) in /_/src/Moq/Mock.cs:line 332
   at Moq.Mock`1.Verify(Expression`1 expression, Times times) in /_/src/Moq/Mock`1.cs:line 727
   at Moq.Mock`1.Verify(Expression`1 expression, Func`1 times) in /_/src/Moq/Mock`1.cs:line 741
   at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithException_ShouldReturn500AndLogError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs:line 268
--- End of stack trace from previous location ---
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithDefaultSigningSecret_ShouldProcessSuccessfully [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithInvalidJson_ShouldReturnBadRequest [< 1 ms]
[xUnit.net 00:00:05.10]     Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampExactlyAt5Minutes_ShouldAcceptRequest [FAIL]
[xUnit.net 00:00:05.10]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:05.10]       Stack Trace:
[xUnit.net 00:00:05.10]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs(873,0): at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampExactlyAt5Minutes_ShouldAcceptRequest()
[xUnit.net 00:00:05.10]         --- End of stack trace from previous location ---
[xUnit.net 00:00:05.15]     Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampInFuture_ShouldRejectAsInvalid [FAIL]
[xUnit.net 00:00:05.15]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:05.15]       Stack Trace:
[xUnit.net 00:00:05.15]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs(777,0): at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampInFuture_ShouldRejectAsInvalid()
[xUnit.net 00:00:05.15]         --- End of stack trace from previous location ---
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithSlashCommand_ShouldProcessCorrectly [3 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithAppMentionEvent_ShouldProcessCorrectly [13 ms]
  Failed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampExactlyAt5Minutes_ShouldAcceptRequest [2 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampExactlyAt5Minutes_ShouldAcceptRequest() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs:line 873
--- End of stack trace from previous location ---
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMissingTimestamp_ShouldReturnBadRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithFileShareEvent_ShouldProcessCorrectly [19 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithFutureTimestampOver5Minutes_ShouldRejectRequest [< 1 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampJustOver5Minutes_ShouldRejectRequest [< 1 ms]
  Failed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampInFuture_ShouldRejectAsInvalid [3 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampInFuture_ShouldRejectAsInvalid() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs:line 777
--- End of stack trace from previous location ---
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithVeryLargeBody_ShouldHandleCorrectly [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetHealthStatus_WithDatabaseException_ShouldThrow [206 ms]
[xUnit.net 00:00:05.17]     Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMultipleCallsInParallel_ShouldHandleAll [FAIL]
[xUnit.net 00:00:05.17]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:05.17]       Stack Trace:
[xUnit.net 00:00:05.17]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs(758,0): at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMultipleCallsInParallel_ShouldHandleAll()
[xUnit.net 00:00:05.17]         --- End of stack trace from previous location ---
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithVariousDisplayNames_HandlesCorrectly [< 1 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Unknown_CreatesNewInstanceEachTime [5 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.UpdateLastSync_MultipleTimes_ShouldUpdateCorrectly [22 ms]
  Passed Sigma.Domain.Tests.ValueObjects.MessageSenderTests.Constructor_WithLongStrings_HandlesCorrectly [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.DeactivateAndActivateSuccessfully [< 1 ms]
  Passed Sigma.Domain.Tests.Entities.WorkspaceShould.Activate_WhenAlreadyActive_ShouldRemainActive [11 ms]

Test Run Successful.
Total tests: 184
     Passed: 184
 Total time: 6.3422 Seconds
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithCancellationRequested_ShouldRespectCancellationToken [1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_CommandWithResponse_WithException_ShouldRollbackAndRethrow [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_ConcurrentCommands_ShouldExecuteIndependently [12 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_Command_WithException_ShouldRollbackAndRethrow [3 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_CommandWithResponse_WithFailure_ShouldNotSaveChanges [1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_Command_WithFailure_ShouldNotSaveChanges [< 1 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithSaveChangesException_ShouldRollbackAndRethrow [3 ms]
  Passed Sigma.Application.Tests.Behaviors.TransactionBehaviorTests.HandleAsync_WithNestedTransactionAttempt_ShouldReuseExisting [2 ms]

Test Run Successful.
Total tests: 120
     Passed: 120
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithOldTimestamp_ShouldReturnBadRequest [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspaces_ShouldReturnWorkspacesForTenant [3 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithInvalidSignature_ShouldReturnUnauthorized [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannel_WithExistingId_ShouldReturnChannel [5 ms]
  Failed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMultipleCallsInParallel_ShouldHandleAll [< 1 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithMultipleCallsInParallel_ShouldHandleAll() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Webhooks/SlackWebhookHandlerTests.cs:line 758
--- End of stack trace from previous location ---
  Passed Sigma.API.Tests.GraphQL.QueryTests.AllMethods_WithCancellationToken_ShouldRespectCancellation [2 ms]
  Passed Sigma.API.Tests.Webhooks.SlackWebhookHandlerTests.HandleAsync_WithTimestampJustUnder5Minutes_ShouldAcceptRequest [6 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetHealthStatus_WithWorkingDatabase_ShouldReturnTrue [64 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessage_WithExistingMessage_ShouldReturnIt [6 ms]
 Total time: 6.3729 Seconds
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithMultipleEntityTypes_ShouldSaveAll [242 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.ExistsAsync_WithExistingTenant_ShouldReturnTrue [178 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetByIdAsync_WithExistingMessage_ShouldReturnMessage [330 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.GetByWorkspaceIdAsync_WithChannels_ShouldReturnAll [274 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.ExistsAsync_WithNonExistentTenant_ShouldReturnFalse [87 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.UpdateAsync_WithModifiedProperties_ShouldUpdateAllFields [268 ms]
[xUnit.net 00:00:05.46]     Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.ModelConfiguration_ShouldEnforceTenantIndexes [SKIP]
[xUnit.net 00:00:05.46]       In-memory database doesn't enforce unique constraints
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenants_ShouldReturnAllActiveTenants [26 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetHealthStatus_WithFailedDatabase_ShouldReturnFalse [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenant_WithNonExistingId_ShouldReturnNull [2 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannels_WithEmptyResult_ShouldReturnEmptyQueryable [6 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetHealthStatus_WithConnectableDatabase_ShouldReturnTrue [6 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessage_WithNonExistingMessage_ShouldReturnNull [12 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannel_WithValidId_ShouldReturnChannel [2 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannels_ShouldReturnChannelsForWorkspace [6 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithDefaultLimit_ShouldUse100 [121 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithCustomLimit_ShouldUseProvidedLimit [7 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenant_WithExistingId_ShouldReturnTenant [3 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspace_WithNullResult_ShouldReturnNull [5 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenants_WithNullRepository_ShouldThrowArgumentNullException [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetVersion_ShouldReturnCorrectVersion [< 1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspace_WithExistingId_ShouldReturnWorkspace [16 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetTenants_WithEmptyList_ShouldReturnEmptyQueryable [9 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithCustomLimit_ShouldRespectLimit [11 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspaces_WithCancellation_ShouldPropagateCancellation [3 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.WorkspaceChannelRelationship_ShouldCascadeDelete [355 ms]
  Skipped Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.ModelConfiguration_ShouldEnforceTenantIndexes [1 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithNoChanges_ShouldReturnZero [61 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.ExistsAsync_WithCancellationToken_ShouldRespectCancellation [254 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByIdAsync_WithNonExistentWorkspace_ShouldReturnNull [221 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.Constructor_WithOptionsAndTenantContext_CreatesContext [53 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.ExistsAsync_WithNonExistentMessage_ShouldReturnFalse [422 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.EntityConfigurations_ApplyCorrectly [49 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.AddAsync_ShouldAddChannel [421 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByTenantIdAsync_WithNoWorkspaces_ShouldReturnEmptyList [133 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetBySlugAsync_WithCaseSensitivity_ShouldFindCorrectly [144 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetBySlugAsync_WithEmptySlug_ShouldReturnNull [108 ms]
[xUnit.net 00:00:05.98]     Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenant_WithNonExistentTenant_ShouldReturnNull [FAIL]
[xUnit.net 00:00:05.99]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:05.99]       
[xUnit.net 00:00:05.99]       DETAIL: It seems to have just been dropped or renamed.
[xUnit.net 00:00:05.99]       Stack Trace:
[xUnit.net 00:00:05.99]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:05.99]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:05.99]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:05.99]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:05.99]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:05.99]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:05.99]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:05.99]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithSpecificLimit_ShouldUseCorrectLimit [5 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessage_WithExistingId_ShouldReturnMessage [3 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannels_WithMultipleChannels_ShouldReturnAll [12 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspaces_WithEmptyResult_ShouldReturnEmptyQueryable [2 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetChannels_WithLargeWorkspace_ShouldHandleCorrectly [3 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_WithEmptyChannel_ShouldReturnEmptyQueryable [4 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetWorkspaces_WithLargeTenantData_ShouldHandleCorrectly [1 ms]
  Passed Sigma.API.Tests.GraphQL.QueryTests.GetMessages_ShouldReturnMessagesForChannel [3 ms]
  Failed Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenant_WithNonExistentTenant_ShouldReturnNull [1 s]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist

DETAIL: It seems to have just been dropped or renamed.
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.ExistsAsync_WithExistingChannel_ShouldReturnTrue [197 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithModifiedEntity_SetsUpdatedAtUtc [222 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.AddAsync_WithValidWorkspace_ShouldAddToContext [210 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.Constructor_WithOptionsOnly_CreatesContext [105 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetByPlatformIdAsync_WithExistingMessage_ShouldReturnMessage [344 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetAllActiveAsync_WithMixedActiveInactive_ShouldReturnOnlyActive [200 ms]
[xUnit.net 00:00:06.21]     Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenants_WithMultipleTenants_ShouldReturnAll [FAIL]
[xUnit.net 00:00:06.22]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:06.22]       Stack Trace:
[xUnit.net 00:00:06.22]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:06.22]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:06.22]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.22]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.22]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.22]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.22]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.22]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.GetByExternalIdAsync_WithExistingChannel_ShouldReturnChannel [272 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.UpdateAsync_WithExistingWorkspace_ShouldUpdateInContext [229 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.UpdateAsync_WithDetachedEntity_ShouldUpdateSuccessfully [167 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByExternalIdAsync_WithNonExistentExternalId_ShouldReturnNull [137 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.MessageFilter_AppliedWithTenantContext [331 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.UpdateAsync_ShouldUpdateMessage [330 ms]
[xUnit.net 00:00:06.37]     Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenant_WithExistingTenant_ShouldReturnTenant [FAIL]
[xUnit.net 00:00:06.37]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:06.37]       Stack Trace:
[xUnit.net 00:00:06.37]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:06.37]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:06.37]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.37]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.37]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.37]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.37]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.37]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.Infrastructure.Tests.Repositories.ChannelRepositoryTests.GetByIdAsync_WithNonExistentChannel_ShouldReturnNull [209 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.AddAsync_WithValidTenant_ShouldAddToContext [127 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.CanConnectAsync_WithValidConnection_ShouldReturnTrue [45 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByTenantIdAsync_WithExistingWorkspaces_ShouldReturnAll [127 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetByIdAsync_WithExistingTenant_ShouldReturnTenant [75 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithCancellationToken_ShouldRespectCancellation [86 ms]
[xUnit.net 00:00:06.50]     Sigma.API.Tests.GraphQL.TenantQueryTests.GetWorkspaces_ForTenant_ShouldReturnWorkspaces [FAIL]
[xUnit.net 00:00:06.50]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:06.50]       Stack Trace:
[xUnit.net 00:00:06.50]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:06.50]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:06.50]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.50]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.50]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.50]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.50]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:06.50]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:06.59]     Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithFailure_ShouldRollbackChanges [SKIP]
[xUnit.net 00:00:06.59]       In-memory database doesn't enforce unique constraints
  Passed Sigma.Infrastructure.Tests.Repositories.TenantRepositoryTests.GetByIdAsync_WithNonExistentTenant_ShouldReturnNull [32 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.ExistsAsync_WithExistingMessage_ShouldReturnTrue [139 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByTenantIdAsync_WithMultiplePlatforms_ShouldReturnAll [117 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_ClearsDomainEventsAfterSaving [88 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithNewEntity_SetsCreatedAtUtc [85 ms]
  Skipped Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithFailure_ShouldRollbackChanges [1 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.MarkAsDeleted_ShouldSoftDeleteMessage [180 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.ExistsAsync_WithExistingWorkspace_ShouldReturnTrue [133 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.TenantFilter_AppliedWhenTenantContextProvided [98 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByExternalIdAsync_WithExistingWorkspace_ShouldReturnWorkspace [124 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.EntityTracking_ShouldTrackStateChangesCorrectly [103 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.AddAsync_ShouldAddMessage [201 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.WorkspaceRepositoryTests.GetByExternalIdAsync_WithDifferentPlatform_ShouldReturnNull [112 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.ChannelFilter_WorksWithWorkspaceRelationship [110 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetRecentAsync_WithMatchingTimestamp_ShouldReturnMessages [141 ms]
[xUnit.net 00:00:07.18]     Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithInvalidInput_ShouldReturnValidationError [FAIL]
[xUnit.net 00:00:07.18]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:07.18]       Stack Trace:
[xUnit.net 00:00:07.18]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:07.18]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:07.18]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.18]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.18]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.18]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.18]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.18]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:07.35]     Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithDuplicateSlug_ShouldReturnError [FAIL]
[xUnit.net 00:00:07.35]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:07.35]       Stack Trace:
[xUnit.net 00:00:07.35]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:07.35]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:07.35]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.35]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.35]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.35]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.35]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.35]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Failed Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenants_WithMultipleTenants_ShouldReturnAll [224 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.TenantQueryTests.GetTenant_WithExistingTenant_ShouldReturnTenant [166 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.TenantQueryTests.GetWorkspaces_ForTenant_ShouldReturnWorkspaces [118 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithInvalidInput_ShouldReturnValidationError [294 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithDuplicateSlug_ShouldReturnError [167 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
[xUnit.net 00:00:07.56]     Sigma.API.Tests.GraphQL.TenantMutationTests.UpdateTenantPlan_WithValidInput_ShouldUpdateTenant [FAIL]
[xUnit.net 00:00:07.56]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:07.56]       Stack Trace:
[xUnit.net 00:00:07.56]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:07.56]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:07.56]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.56]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.56]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.56]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.56]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.56]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:07.74]     Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithValidInput_ShouldCreateTenant [FAIL]
[xUnit.net 00:00:07.74]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:07.74]       Stack Trace:
[xUnit.net 00:00:07.74]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:07.74]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:07.74]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.74]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.74]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.74]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.74]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.74]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:07.83]     Sigma.API.Tests.GraphQL.SchemaSnapshotTests.Schema_Should_Match_Snapshot [FAIL]
[xUnit.net 00:00:07.83]       System.InvalidOperationException : An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'SigmaDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
[xUnit.net 00:00:07.83]       Stack Trace:
[xUnit.net 00:00:07.83]            at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
[xUnit.net 00:00:07.84]            at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
[xUnit.net 00:00:07.84]            at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
[xUnit.net 00:00:07.84]            at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
[xUnit.net 00:00:07.84]            at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
[xUnit.net 00:00:07.84]         /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/DatabaseInitializer.cs(29,0): at Sigma.Infrastructure.Persistence.DatabaseInitializer.StartAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
[xUnit.net 00:00:07.84]         /Users/rodrigolmiranda/repo/sigma/src/API/Program.cs(266,0): at Program.<Main>$(String[] args)
[xUnit.net 00:00:07.84]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:07.84]            at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:07.84]         --- End of stack trace from previous location ---
[xUnit.net 00:00:07.84]            at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.DeferredHost.StartAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:07.84]            at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Start(IHost host)
[xUnit.net 00:00:07.84]            at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
[xUnit.net 00:00:07.84]            at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
[xUnit.net 00:00:07.84]            at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.StartServer()
[xUnit.net 00:00:07.84]            at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.get_Services()
[xUnit.net 00:00:07.84]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/SchemaSnapshotTests.cs(22,0): at Sigma.API.Tests.GraphQL.SchemaSnapshotTests.Schema_Should_Match_Snapshot()
[xUnit.net 00:00:07.84]         --- End of stack trace from previous location ---
[xUnit.net 00:00:07.87]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessages_ForChannel_ShouldReturnMessages [FAIL]
[xUnit.net 00:00:07.87]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:07.87]       Stack Trace:
[xUnit.net 00:00:07.87]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:07.87]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:07.87]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.87]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.87]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.87]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.87]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:07.87]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:08.31]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessages_WithDateRange_ShouldFilterMessages [FAIL]
[xUnit.net 00:00:08.31]       Npgsql.PostgresException : 42P07: relation "OutboxMessages" already exists
[xUnit.net 00:00:08.31]       Stack Trace:
[xUnit.net 00:00:08.31]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:08.31]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:08.31]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.CreateTablesAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]            at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:08.31]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(101,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:08.48]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannels_ForWorkspace_ShouldReturnChannels [FAIL]
[xUnit.net 00:00:08.48]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:08.48]       
[xUnit.net 00:00:08.48]       DETAIL: It seems to have just been dropped or renamed.
[xUnit.net 00:00:08.48]       Stack Trace:
[xUnit.net 00:00:08.48]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:08.48]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:08.48]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.48]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.48]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.48]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.48]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.48]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.Infrastructure.Tests.Persistence.SigmaDbContextTests.SaveChangesAsync_WithMultipleEntities_ShouldSetTimestamps [61 ms]
  Passed Sigma.Infrastructure.Tests.Repositories.MessageRepositoryTests.GetByChannelIdAsync_WithMessages_ShouldReturnAll [177 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.RollbackAsync_WithCancellationToken_ShouldRespectCancellation [6 s]
[xUnit.net 00:00:08.56]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannel_WithInvalidId_ShouldReturnNull [FAIL]
[xUnit.net 00:00:08.56]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:08.56]       Stack Trace:
[xUnit.net 00:00:08.56]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:08.56]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:08.56]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.56]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.56]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.56]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.56]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:08.56]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Failed Sigma.API.Tests.GraphQL.TenantMutationTests.UpdateTenantPlan_WithValidInput_ShouldUpdateTenant [208 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.TenantMutationTests.CreateTenant_WithValidInput_ShouldCreateTenant [177 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.SchemaSnapshotTests.Schema_Should_Match_Snapshot [3 s]
  Error Message:
   System.InvalidOperationException : An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'SigmaDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Sigma.Infrastructure.Persistence.DatabaseInitializer.StartAsync(CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/DatabaseInitializer.cs:line 29
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/rodrigolmiranda/repo/sigma/src/API/Program.cs:line 266
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.DeferredHost.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Start(IHost host)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.StartServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.get_Services()
   at Sigma.API.Tests.GraphQL.SchemaSnapshotTests.Schema_Should_Match_Snapshot() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/SchemaSnapshotTests.cs:line 22
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessages_ForChannel_ShouldReturnMessages [119 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessages_WithDateRange_ShouldFilterMessages [435 ms]
  Error Message:
   Npgsql.PostgresException : 42P07: relation "OutboxMessages" already exists
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.CreateTablesAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 101
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannels_ForWorkspace_ShouldReturnChannels [162 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist

DETAIL: It seems to have just been dropped or renamed.
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannel_WithInvalidId_ShouldReturnNull [86 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Transaction_CompleteWorkflow_CommitsSuccessfully [1 s]
[xUnit.net 00:00:10.11]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithMultipleTenants_ShouldReturnAll [FAIL]
[xUnit.net 00:00:10.11]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:10.11]       Expected: null
[xUnit.net 00:00:10.11]       Actual:   [GraphQLError { Extensions = [["message"] = An exception has been raised that is likely due to a transient failure., ["stackTrace"] =    at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:10.11]          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[xUnit.net 00:00:10.11]          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
[xUnit.net 00:00:10.11]          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
[xUnit.net 00:00:10.11]          at Sigma.Infrastructure.Persistence.Repositories.TenantRepository.GetAllActiveAsync(CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/Repositories/TenantRepository.cs:line 32
[xUnit.net 00:00:10.11]          at Sigma.API.GraphQL.Query.GetTenants(ITenantRepository repository, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 22
[xUnit.net 00:00:10.11]          at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
[xUnit.net 00:00:10.11]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:10.11]       --- End of stack trace from previous location ---
[xUnit.net 00:00:10.11]          at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:10.11]       --- End of stack trace from previous location ---
[xUnit.net 00:00:10.11]          at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:10.11]       --- End of stack trace from previous location ---
[xUnit.net 00:00:10.11]          at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:10.11]       --- End of stack trace from previous location ---
[xUnit.net 00:00:10.11]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:10.11]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:10.11]       --- End of stack trace from previous location ---
[xUnit.net 00:00:10.11]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:10.11]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenants"] }]
[xUnit.net 00:00:10.11]       Stack Trace:
[xUnit.net 00:00:10.11]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(53,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithMultipleTenants_ShouldReturnAll()
[xUnit.net 00:00:10.11]         --- End of stack trace from previous location ---
[xUnit.net 00:00:10.21]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInactiveTenant_ShouldReturnNull [FAIL]
[xUnit.net 00:00:10.21]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:10.21]       Stack Trace:
[xUnit.net 00:00:10.21]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:10.21]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:10.21]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.21]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.21]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.21]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.21]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.21]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithMultipleTenants_ShouldReturnAll [1 s]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = An exception has been raised that is likely due to a transient failure., ["stackTrace"] =    at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Sigma.Infrastructure.Persistence.Repositories.TenantRepository.GetAllActiveAsync(CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/Repositories/TenantRepository.cs:line 32
   at Sigma.API.GraphQL.Query.GetTenants(ITenantRepository repository, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 22
   at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Types.UnwrapFieldMiddlewareHelper.<>c__DisplayClass0_1.<<CreateDataMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenants"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithMultipleTenants_ShouldReturnAll() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 53
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInactiveTenant_ShouldReturnNull [98 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
[xUnit.net 00:00:10.71]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithInactiveTenants_ShouldReturnOnlyActive [FAIL]
[xUnit.net 00:00:10.71]       System.InvalidOperationException : An exception has been raised that is likely due to a transient failure.
[xUnit.net 00:00:10.71]       ---- Microsoft.EntityFrameworkCore.DbUpdateException : An error occurred while saving the entity changes. See the inner exception for details.
[xUnit.net 00:00:10.71]       -------- Npgsql.PostgresException : 57P01: terminating connection due to administrator command
[xUnit.net 00:00:10.71]       Stack Trace:
[xUnit.net 00:00:10.71]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]         /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/SigmaDbContext.cs(95,0): at Sigma.Infrastructure.Persistence.SigmaDbContext.SaveChangesAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(94,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithInactiveTenants_ShouldReturnOnlyActive()
[xUnit.net 00:00:10.71]         --- End of stack trace from previous location ---
[xUnit.net 00:00:10.71]         ----- Inner Stack Trace -----
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]         ----- Inner Stack Trace -----
[xUnit.net 00:00:10.71]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:10.71]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:10.71]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:10.71]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:10.71]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:10.71]            at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannel_WithValidId_ShouldReturnChannel [FAIL]
[xUnit.net 00:00:10.90]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:10.90]       Stack Trace:
[xUnit.net 00:00:10.90]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:10.90]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:10.90]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:10.90]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:11.04]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetHealthStatus_WithHealthyDatabase_ShouldReturnTrue [FAIL]
[xUnit.net 00:00:11.04]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:11.04]       Stack Trace:
[xUnit.net 00:00:11.04]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:11.04]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:11.04]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.04]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.04]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.04]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.04]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.04]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:11.13]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspaces_ForTenant_ShouldReturnWorkspaces [FAIL]
[xUnit.net 00:00:11.13]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:11.13]       Stack Trace:
[xUnit.net 00:00:11.13]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:11.13]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:11.13]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.13]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.13]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.13]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.13]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.13]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.RollbackAsync_WithoutTransaction_DoesNotThrow [664 ms]
[xUnit.net 00:00:11.83]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithValidId_ShouldReturnWorkspace [FAIL]
[xUnit.net 00:00:11.83]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:11.83]       Expected: null
[xUnit.net 00:00:11.83]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:11.83]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:11.83]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:11.83]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:11.83]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:11.83]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:11.83]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:11.83]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:11.83]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:11.83]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:11.83]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:11.83]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:11.83]          at lambda_method1090(Closure, IResolverContext)
[xUnit.net 00:00:11.83]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:11.83]       --- End of stack trace from previous location ---
[xUnit.net 00:00:11.83]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:11.83]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:11.83]       --- End of stack trace from previous location ---
[xUnit.net 00:00:11.83]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:11.83]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["workspace"] }]
[xUnit.net 00:00:11.83]       Stack Trace:
[xUnit.net 00:00:11.83]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(309,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithValidId_ShouldReturnWorkspace()
[xUnit.net 00:00:11.83]         --- End of stack trace from previous location ---
[xUnit.net 00:00:11.95]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetVersion_ShouldReturnVersion [FAIL]
[xUnit.net 00:00:11.95]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:11.95]       Stack Trace:
[xUnit.net 00:00:11.95]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:11.95]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:11.95]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.95]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.95]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.95]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.95]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:11.96]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:12.04]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspaces_ForNonExistentTenant_ShouldReturnEmpty [FAIL]
[xUnit.net 00:00:12.04]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:12.04]       Stack Trace:
[xUnit.net 00:00:12.04]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:12.04]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:12.04]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.04]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.04]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.04]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.04]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.04]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithInactiveTenants_ShouldReturnOnlyActive [386 ms]
  Error Message:
   System.InvalidOperationException : An exception has been raised that is likely due to a transient failure.
---- Microsoft.EntityFrameworkCore.DbUpdateException : An error occurred while saving the entity changes. See the inner exception for details.
-------- Npgsql.PostgresException : 57P01: terminating connection due to administrator command
  Stack Trace:
     at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Sigma.Infrastructure.Persistence.SigmaDbContext.SaveChangesAsync(CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/SigmaDbContext.cs:line 95
   at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithInactiveTenants_ShouldReturnOnlyActive() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 94
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
----- Inner Stack Trace -----
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannel_WithValidId_ShouldReturnChannel [170 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetHealthStatus_WithHealthyDatabase_ShouldReturnTrue [129 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspaces_ForTenant_ShouldReturnWorkspaces [89 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithValidId_ShouldReturnWorkspace [694 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at lambda_method1090(Closure, IResolverContext)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["workspace"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithValidId_ShouldReturnWorkspace() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 309
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetVersion_ShouldReturnVersion [123 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspaces_ForNonExistentTenant_ShouldReturnEmpty [89 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
[xUnit.net 00:00:12.62]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithInvalidId_ShouldReturnNull [FAIL]
[xUnit.net 00:00:12.62]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:12.62]       Expected: null
[xUnit.net 00:00:12.62]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:12.62]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:12.62]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:12.62]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:12.62]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:12.62]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:12.62]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:12.62]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:12.62]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:12.62]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:12.62]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:12.62]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:12.62]          at lambda_method1280(Closure, IResolverContext)
[xUnit.net 00:00:12.62]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:12.62]       --- End of stack trace from previous location ---
[xUnit.net 00:00:12.62]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:12.62]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:12.62]       --- End of stack trace from previous location ---
[xUnit.net 00:00:12.62]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:12.62]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["workspace"] }]
[xUnit.net 00:00:12.62]       Stack Trace:
[xUnit.net 00:00:12.62]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(334,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithInvalidId_ShouldReturnNull()
[xUnit.net 00:00:12.62]         --- End of stack trace from previous location ---
[xUnit.net 00:00:12.69]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithValidId_ShouldReturnMessage [FAIL]
[xUnit.net 00:00:12.69]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:12.69]       Stack Trace:
[xUnit.net 00:00:12.69]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:12.69]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:12.69]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.69]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.69]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.69]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.69]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:12.69]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:13.02]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithValidId_ShouldReturnTenant [FAIL]
[xUnit.net 00:00:13.02]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:13.02]       Expected: null
[xUnit.net 00:00:13.02]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:13.02]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:13.02]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:13.02]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:13.02]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:13.02]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:13.02]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:13.02]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:13.02]          at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:13.02]          at Sigma.Application.Services.QueryDispatcher.DispatchAsync[TQuery,TResponse](TQuery query, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Application/Services/QueryDispatcher.cs:line 23
[xUnit.net 00:00:13.02]          at Sigma.API.GraphQL.Query.GetTenant(Guid id, IQueryDispatcher dispatcher, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 33
[xUnit.net 00:00:13.02]          at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
[xUnit.net 00:00:13.02]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:13.02]       --- End of stack trace from previous location ---
[xUnit.net 00:00:13.02]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:13.02]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:13.02]       --- End of stack trace from previous location ---
[xUnit.net 00:00:13.02]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:13.02]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenant"] }]
[xUnit.net 00:00:13.02]       Stack Trace:
[xUnit.net 00:00:13.02]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(148,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithValidId_ShouldReturnTenant()
[xUnit.net 00:00:13.02]         --- End of stack trace from previous location ---
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveEntitiesAsync_CallsSaveChangesAndReturnsTrue [1 s]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_WithCancellationToken_ShouldPassToken [872 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Transaction_MultipleOperations_MaintainsAtomicity [423 ms]
[xUnit.net 00:00:13.51]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithInvalidId_ShouldReturnNull [FAIL]
[xUnit.net 00:00:13.51]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:13.51]       Expected: null
[xUnit.net 00:00:13.52]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:13.52]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:13.52]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:13.52]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:13.52]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:13.52]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:13.52]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:13.53]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:13.53]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:13.53]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.53]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:13.53]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:13.53]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:13.53]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:13.53]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:13.53]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:13.53]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:13.53]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:13.53]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:13.53]          at lambda_method1640(Closure, IResolverContext)
[xUnit.net 00:00:13.53]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:13.53]       --- End of stack trace from previous location ---
[xUnit.net 00:00:13.53]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:13.53]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:13.53]       --- End of stack trace from previous location ---
[xUnit.net 00:00:13.53]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:13.53]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["message"] }]
[xUnit.net 00:00:13.53]       Stack Trace:
[xUnit.net 00:00:13.53]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(669,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithInvalidId_ShouldReturnNull()
[xUnit.net 00:00:13.53]         --- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithInvalidId_ShouldReturnNull [573 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at lambda_method1280(Closure, IResolverContext)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["workspace"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetWorkspace_WithInvalidId_ShouldReturnNull() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 334
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithValidId_ShouldReturnMessage [79 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithValidId_ShouldReturnTenant [327 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Sigma.Application.Services.QueryDispatcher.DispatchAsync[TQuery,TResponse](TQuery query, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Application/Services/QueryDispatcher.cs:line 23
   at Sigma.API.GraphQL.Query.GetTenant(Guid id, IQueryDispatcher dispatcher, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 33
   at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenant"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithValidId_ShouldReturnTenant() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 148
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithInvalidId_ShouldReturnNull [464 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at lambda_method1640(Closure, IResolverContext)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["message"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetMessage_WithInvalidId_ShouldReturnNull() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 669
--- End of stack trace from previous location ---
[xUnit.net 00:00:13.83]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithNoTenants_ShouldReturnEmptyList [FAIL]
[xUnit.net 00:00:13.83]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:13.83]       Stack Trace:
[xUnit.net 00:00:13.84]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:13.84]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:13.84]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.84]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.84]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.84]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.84]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:13.84]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:14.03]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannels_ForNonExistentWorkspace_ShouldReturnEmpty [FAIL]
[xUnit.net 00:00:14.03]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:14.03]       Stack Trace:
[xUnit.net 00:00:14.03]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:14.03]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:14.03]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.03]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.03]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.03]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.03]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.03]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:14.43]     Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInvalidId_ShouldReturnNull [FAIL]
[xUnit.net 00:00:14.43]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:14.43]       Expected: null
[xUnit.net 00:00:14.43]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:14.43]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:14.43]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:14.43]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:14.43]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:14.43]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:14.43]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:14.43]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:14.43]          at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:14.43]          at Sigma.Application.Services.QueryDispatcher.DispatchAsync[TQuery,TResponse](TQuery query, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Application/Services/QueryDispatcher.cs:line 23
[xUnit.net 00:00:14.43]          at Sigma.API.GraphQL.Query.GetTenant(Guid id, IQueryDispatcher dispatcher, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 33
[xUnit.net 00:00:14.43]          at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
[xUnit.net 00:00:14.43]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:14.43]       --- End of stack trace from previous location ---
[xUnit.net 00:00:14.43]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:14.43]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:14.43]       --- End of stack trace from previous location ---
[xUnit.net 00:00:14.43]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:14.43]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenant"] }]
[xUnit.net 00:00:14.43]       Stack Trace:
[xUnit.net 00:00:14.43]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs(173,0): at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInvalidId_ShouldReturnNull()
[xUnit.net 00:00:14.43]         --- End of stack trace from previous location ---
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Transaction_NestedTransactions_ShouldNotCreateMultiple [373 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_WithFailure_ShouldThrowException [1 s]
[xUnit.net 00:00:14.92]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithInvalidName_ShouldReturnValidationError [FAIL]
[xUnit.net 00:00:14.92]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:14.92]       Stack Trace:
[xUnit.net 00:00:14.92]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(170,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithInvalidName_ShouldReturnValidationError()
[xUnit.net 00:00:14.92]         --- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenants_WithNoTenants_ShouldReturnEmptyList [319 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetChannels_ForNonExistentWorkspace_ShouldReturnEmpty [187 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInvalidId_ShouldReturnNull [400 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Sigma.Application.Services.QueryDispatcher.DispatchAsync[TQuery,TResponse](TQuery query, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Application/Services/QueryDispatcher.cs:line 23
   at Sigma.API.GraphQL.Query.GetTenant(Guid id, IQueryDispatcher dispatcher, CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/API/GraphQL/Query.cs:line 33
   at HotChocolate.Resolvers.Expressions.ExpressionHelper.AwaitTaskHelper[T](Task`1 task)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["tenant"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.QueryIntegrationTests.GetTenant_WithInvalidId_ShouldReturnNull() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/QueryIntegrationTests.cs:line 173
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithInvalidName_ShouldReturnValidationError [466 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithInvalidName_ShouldReturnValidationError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 170
--- End of stack trace from previous location ---
[xUnit.net 00:00:15.38]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDefaultPlanType_ShouldUseFreePlan [FAIL]
[xUnit.net 00:00:15.38]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:15.38]       Expected: null
[xUnit.net 00:00:15.38]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:15.38]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:15.38]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:15.38]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:15.38]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:15.38]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:15.38]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:15.38]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:15.38]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitIEnumerable(IEnumerableCallSite enumerableCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:15.38]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:15.38]          at lambda_method2182(Closure, IResolverContext)
[xUnit.net 00:00:15.38]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:15.38]       --- End of stack trace from previous location ---
[xUnit.net 00:00:15.38]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:15.39]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:15.39]       --- End of stack trace from previous location ---
[xUnit.net 00:00:15.39]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:15.39]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["createTenant"] }]
[xUnit.net 00:00:15.39]       Stack Trace:
[xUnit.net 00:00:15.39]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(209,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDefaultPlanType_ShouldUseFreePlan()
[xUnit.net 00:00:15.39]         --- End of stack trace from previous location ---
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_CalledMultipleTimes_ShouldWorkCorrectly [490 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.BeginTransactionAsync_StartsNewTransaction [414 ms]
[xUnit.net 00:00:16.25]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithValidInput_ShouldCreateWorkspace [FAIL]
[xUnit.net 00:00:16.25]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:16.25]       Stack Trace:
[xUnit.net 00:00:16.25]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:16.25]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:16.25]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:16.25]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:16.25]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:16.25]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:16.25]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:16.25]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDefaultPlanType_ShouldUseFreePlan [455 ms]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitIEnumerable(IEnumerableCallSite enumerableCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at lambda_method2182(Closure, IResolverContext)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["createTenant"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDefaultPlanType_ShouldUseFreePlan() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 209
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithValidInput_ShouldCreateWorkspace [848 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
[xUnit.net 00:00:16.93]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithDuplicateExternalId_ShouldReturnError [FAIL]
[xUnit.net 00:00:16.93]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:16.93]       Stack Trace:
[xUnit.net 00:00:16.93]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(523,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithDuplicateExternalId_ShouldReturnError()
[xUnit.net 00:00:16.93]         --- End of stack trace from previous location ---
[xUnit.net 00:00:17.02]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithInvalidPlanType_ShouldReturnValidationError [FAIL]
[xUnit.net 00:00:17.02]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:17.02]       Stack Trace:
[xUnit.net 00:00:17.02]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:17.02]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:17.02]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.02]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.02]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.02]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.02]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.02]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:17.41]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithDuplicateExternalId_ShouldReturnError [FAIL]
[xUnit.net 00:00:17.41]       System.InvalidOperationException : An exception has been raised that is likely due to a transient failure.
[xUnit.net 00:00:17.41]       ---- Microsoft.EntityFrameworkCore.DbUpdateException : An error occurred while saving the entity changes. See the inner exception for details.
[xUnit.net 00:00:17.41]       -------- Npgsql.PostgresException : 57P01: terminating connection due to administrator command
[xUnit.net 00:00:17.41]       Stack Trace:
[xUnit.net 00:00:17.41]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]         /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/SigmaDbContext.cs(95,0): at Sigma.Infrastructure.Persistence.SigmaDbContext.SaveChangesAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(662,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithDuplicateExternalId_ShouldReturnError()
[xUnit.net 00:00:17.41]         --- End of stack trace from previous location ---
[xUnit.net 00:00:17.41]         ----- Inner Stack Trace -----
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]         ----- Inner Stack Trace -----
[xUnit.net 00:00:17.41]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:17.41]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:17.41]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:17.41]            at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
[xUnit.net 00:00:17.53]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithNonExistentWorkspace_ShouldReturnError [FAIL]
[xUnit.net 00:00:17.53]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:17.54]       Stack Trace:
[xUnit.net 00:00:17.54]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:17.54]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:17.54]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.54]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.54]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.54]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.54]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.54]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.CommitAsync_WithCancellationToken_ShouldRespectCancellation [1 s]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_WithNoChanges_ShouldReturnZero [498 ms]
[xUnit.net 00:00:17.67]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithNonExistentTenant_ShouldReturnError [FAIL]
[xUnit.net 00:00:17.68]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:17.68]       Stack Trace:
[xUnit.net 00:00:17.68]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:17.68]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:17.68]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.68]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.68]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.68]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.68]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:17.68]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:18.13]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithMismatchedTenantAndWorkspace_ShouldReturnError [FAIL]
[xUnit.net 00:00:18.13]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:18.13]       Stack Trace:
[xUnit.net 00:00:18.13]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(747,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithMismatchedTenantAndWorkspace_ShouldReturnError()
[xUnit.net 00:00:18.13]         --- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithDuplicateExternalId_ShouldReturnError [679 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithDuplicateExternalId_ShouldReturnError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 523
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithInvalidPlanType_ShouldReturnValidationError [89 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithDuplicateExternalId_ShouldReturnError [377 ms]
  Error Message:
   System.InvalidOperationException : An exception has been raised that is likely due to a transient failure.
---- Microsoft.EntityFrameworkCore.DbUpdateException : An error occurred while saving the entity changes. See the inner exception for details.
-------- Npgsql.PostgresException : 57P01: terminating connection due to administrator command
  Stack Trace:
     at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Sigma.Infrastructure.Persistence.SigmaDbContext.SaveChangesAsync(CancellationToken cancellationToken) in /Users/rodrigolmiranda/repo/sigma/src/Infrastructure/Persistence/SigmaDbContext.cs:line 95
   at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithDuplicateExternalId_ShouldReturnError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 662
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
----- Inner Stack Trace -----
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithNonExistentWorkspace_ShouldReturnError [131 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateWorkspace_WithNonExistentTenant_ShouldReturnError [140 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithMismatchedTenantAndWorkspace_ShouldReturnError [455 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithMismatchedTenantAndWorkspace_ShouldReturnError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 747
--- End of stack trace from previous location ---
[xUnit.net 00:00:18.28]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDuplicateSlug_ShouldReturnError [FAIL]
[xUnit.net 00:00:18.28]       Npgsql.PostgresException : 42P07: relation "OutboxMessages" already exists
[xUnit.net 00:00:18.28]       Stack Trace:
[xUnit.net 00:00:18.28]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:18.28]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:18.28]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.CreateTablesAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]            at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:18.28]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(101,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:18.46]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithValidInput_ShouldUpdatePlan [FAIL]
[xUnit.net 00:00:18.46]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:18.46]       
[xUnit.net 00:00:18.46]       DETAIL: It seems to have just been dropped or renamed.
[xUnit.net 00:00:18.46]       Stack Trace:
[xUnit.net 00:00:18.46]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:18.46]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:18.46]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.46]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.46]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.46]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.46]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:18.46]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:19.05]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithNonExistentTenant_ShouldReturnError [FAIL]
[xUnit.net 00:00:19.06]       Assert.NotNull() Failure: Value is null
[xUnit.net 00:00:19.06]       Stack Trace:
[xUnit.net 00:00:19.06]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(312,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithNonExistentTenant_ShouldReturnError()
[xUnit.net 00:00:19.06]         --- End of stack trace from previous location ---
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_WithMultipleChanges_ShouldReturnCorrectCount [696 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Transaction_RollbackWorkflow_DoesNotPersistChanges [373 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_AfterDispose_ShouldThrow [359 ms]
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithDuplicateSlug_ShouldReturnError [145 ms]
  Error Message:
   Npgsql.PostgresException : 42P07: relation "OutboxMessages" already exists
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQueryAsync(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.CreateTablesAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 101
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithValidInput_ShouldUpdatePlan [176 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist

DETAIL: It seems to have just been dropped or renamed.
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithNonExistentTenant_ShouldReturnError [579 ms]
  Error Message:
   Assert.NotNull() Failure: Value is null
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.UpdateTenantPlan_WithNonExistentTenant_ShouldReturnError() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 312
--- End of stack trace from previous location ---
[xUnit.net 00:00:20.12]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithValidInput_ShouldCreateChannel [FAIL]
[xUnit.net 00:00:20.12]       Assert.Null() Failure: Value is not null
[xUnit.net 00:00:20.12]       Expected: null
[xUnit.net 00:00:20.12]       Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:20.12]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:20.12]          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:20.12]          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:20.12]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:20.12]          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
[xUnit.net 00:00:20.13]          at Npgsql.NpgsqlDataReader.NextResult()
[xUnit.net 00:00:20.13]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:20.13]          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
[xUnit.net 00:00:20.13]          at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.13]          at Npgsql.NpgsqlCommand.ExecuteNonQuery()
[xUnit.net 00:00:20.13]          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
[xUnit.net 00:00:20.13]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
[xUnit.net 00:00:20.13]          at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
[xUnit.net 00:00:20.13]          at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
[xUnit.net 00:00:20.13]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:20.14]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:20.14]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:20.14]          at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:20.14]          at lambda_method3033(Closure, IResolverContext)
[xUnit.net 00:00:20.14]          at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
[xUnit.net 00:00:20.14]       --- End of stack trace from previous location ---
[xUnit.net 00:00:20.14]          at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
[xUnit.net 00:00:20.14]          at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
[xUnit.net 00:00:20.14]       --- End of stack trace from previous location ---
[xUnit.net 00:00:20.15]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:20.15]          at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["createChannel"] }]
[xUnit.net 00:00:20.15]       Stack Trace:
[xUnit.net 00:00:20.15]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs(581,0): at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithValidInput_ShouldCreateChannel()
[xUnit.net 00:00:20.15]         --- End of stack trace from previous location ---
[xUnit.net 00:00:20.57]     Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithValidInput_ShouldCreateTenant [FAIL]
[xUnit.net 00:00:20.57]       Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
[xUnit.net 00:00:20.57]       Stack Trace:
[xUnit.net 00:00:20.57]            at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
[xUnit.net 00:00:20.57]            at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
[xUnit.net 00:00:20.57]            at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.57]            at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.57]            at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.57]            at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.57]            at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:20.57]         /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs(92,0): at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync()
[xUnit.net 00:00:20.66]   Finished:    Sigma.API.Tests
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.CommitAsync_WithActiveTransaction_CommitsAndDisposesTransaction [1 s]
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithValidInput_ShouldCreateChannel [1 s]
  Error Message:
   Assert.Null() Failure: Value is not null
Expected: null
Actual:   [GraphQLError { Extensions = [["message"] = 57P01: terminating connection due to administrator command, ["stackTrace"] =    at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRaw(DatabaseFacade databaseFacade, String sql, Object[] parameters)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.<.ctor>b__4_4(IServiceProvider provider) in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 68
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at lambda_method3033(Closure, IResolverContext)
   at HotChocolate.Types.Helpers.FieldMiddlewareCompiler.<>c__DisplayClass9_0.<<CreateResolverMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Authorization.AuthorizeMiddleware.InvokeAsync(IMiddlewareContext context)
   at HotChocolate.Authorization.AuthorizeDirectiveType.<>c__DisplayClass3_0.<<CreateMiddleware>b__1>d.MoveNext()
--- End of stack trace from previous location ---
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.ExecuteResolverPipelineAsync(CancellationToken cancellationToken)
   at HotChocolate.Execution.Processing.Tasks.ResolverTask.TryExecuteAsync(CancellationToken cancellationToken)], Message = "Unexpected Execution Error", Path = ["createChannel"] }]
  Stack Trace:
     at Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateChannel_WithValidInput_ShouldCreateChannel() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/MutationIntegrationTests.cs:line 581
--- End of stack trace from previous location ---
  Failed Sigma.API.Tests.GraphQL.MutationIntegrationTests.CreateTenant_WithValidInput_ShouldCreateTenant [448 ms]
  Error Message:
   Npgsql.PostgresException : 3D000: database "sigma_test" does not exist
  Stack Trace:
     at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Sigma.API.Tests.GraphQL.GraphQLTestBase.InitializeAsync() in /Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/GraphQL/GraphQLTestBase.cs:line 92

Test Run Failed.
Total tests: 223
     Passed: 176
     Failed: 47
 Total time: 22.3911 Seconds
     1>Project "/Users/rodrigolmiranda/repo/sigma/Sigma.sln" (1) is building "/Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Sigma.API.Tests.csproj" (11) on node 8 (VSTest target(s)).
    11>_VSTestConsole:
         MSB4181: The "VSTestTask" task returned false but did not log an error.
    11>Done Building Project "/Users/rodrigolmiranda/repo/sigma/tests/Sigma.API.Tests/Sigma.API.Tests.csproj" (VSTest target(s)) -- FAILED.
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveChangesAsync_WithChanges_ShouldReturnCount [959 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.BeginTransactionAsync_WithCancellationToken_ShouldRespectCancellation [247 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Constructor_WithNullContext_ThrowsArgumentNullException [278 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Dispose_WithActiveTransaction_ShouldDisposeTransaction [209 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.CommitAsync_WithoutTransaction_DoesNotThrow [132 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Dispose_WithoutTransaction_DoesNotThrow [160 ms]
[xUnit.net 00:00:23.69]   Finished:    Sigma.Infrastructure.Tests
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.SaveEntitiesAsync_WithCancellationToken_PassesTokenAndReturnsTrue [798 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.RollbackAsync_WithActiveTransaction_RollsBackAndDisposesTransaction [581 ms]
  Passed Sigma.Infrastructure.Tests.Persistence.UnitOfWorkTests.Dispose_DisposesActiveTransaction [308 ms]

Test Run Successful.
Total tests: 161
     Passed: 157
    Skipped: 4
 Total time: 25.1250 Seconds
     1>Done Building Project "/Users/rodrigolmiranda/repo/sigma/Sigma.sln" (VSTest target(s)) -- FAILED.

Build FAILED.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:27.93
